%!TEX root = thesis_proposal.tex

\chapter{Methodology}
\label{chap:m}

This section will first present the overall goals of the proposed dissertation project. Then, it will describe the methodology utilised by NDW to produce the prototype implementation and the one used by RHDHV to produce the commercial one. It will then present a detailed overview of my proposed research methodology.

NDW themselves produced a non-commercial prototype implementation that can achieve a 3D enrichment of NWB with only a few gaps in the produced elevation profiles. Although their workflow does not have a formal documentation, I have been given a verbal description of it, as well as the full output. Based on my understanding of these, their primary technique involved snapping close-by AHN3 Lidar points to the line geometries of NWB. Notable problems with the implementation included non-road points being snapped to centrelines, causing road centrelines to be extruded to overestimated elevations, in turn resulting in sudden jumps in the elevation profiles. Furthermore, no close-by points could be found for underground roads (i.e. tunnels), and strongly occluded parts of roads. For small gaps, this was resolved partially by writing an algorithm to interpolate linearly in such places, using the closest vertices where snapping was successful. For larger gaps, an attempt was made to resolve issues by including information from external sources semi-automatically. Neither issue could be fully resolved via these approaches, hence the results of this project were only used by NDW to gain a better understanding of the problem and the expected difficulties. For a reliable, commercial implementation they subsequently commissioned an implementation from RHDHV.

RHDHV developed their implementation in parallel with the planning of the present scientific research. I have attended NDW-RHDHV status meetings, discussed the implementation directly with RHDHV, and was given access to the codebase of the project. Understanding their implementation is crucial for this research, as it aims to both assess the accuracy of the commercial implementation, as well as compare the accuracy of its own scientific methodology (and implementation) to it. First, where NWB vertices are too sparse, densification takes place and additional temporary vertices are created inside NWB line segments. Then, different workflows are performed for R-roads and P-roads. For P-roads (for which DTB data does not generally exist), the workflow is similar in complexity to the one in the prototype, with the notable difference of using AHN3 DTM rasters. Although AHN3 DTM rasters are badly affected by both large holes and small groups of missing pixels (due to the fixed-parameter IDW interpolation that was used to generate them), RHDHV could make use of them by filling in the gaps of the raster using linear interpolation in a TIN created from the raster pixel centres and their elevations. They overlaid the raster tiles with NWB vertices (including the dense, temporary vertices) and interpolated their elevations using bilinear interpolation in the raster. For R-roads DTB is available, and the assumption is made by RHDHV that it is more accurate than AHN (or at least the stock DTM tiles generated from AHN), to the extent where it should be the primary source of elevation data. Priority is thus given to it in the procedure, with AHN-based interpolation used only as a fallback mechanism in case DTB-based height estimation fails. The goal of the procedure is to find the DTB line segments that delineate the road edges at any given location in the NWB and deduce elevations from them to extrude NWB. First, 2D cross-sections are constructed on NWB vertices, with each given the mean azimuth of the two NWB line segments that they are part of, and also on densified vertices, which receive azimuth values based simply on the azimuth of their parent line segments. DTB lines are then intersected with the cross-sections and for each cross-section, the closest DTB line that satisfies a relative angle condition is chosen, on both sides of NWB. Elevation is then first linearly interpolated inside the two chosen DTB segments to yield values exactly at their intersections with the cross-section. Then, elevation is interpolated linearly along the cross-section itself to yield the final elevation of the NWB vertex or densified temporary vertex. The angle condition is a threshold-based evaluation concerning the angle between intersected DTB lines and cross-sections and is intended to ensure that the chosen DTB segment indeed represents the edge of the road rather than that of another road. The assumption is made, therefore, that the DTB line segments representing road edges will be close to NWB centrelines and roughly parallel with them. Implicitly, this also assumes that NWB centrelines will lie between DTB road edges. In practice, none of these assumptions holds in general, hence a few failsafe mechanisms needed to also be implemented. Wherever the algorithm only finds a suitable DTB intersection on one side of NWB, it is only that side from which the elevation value is deduced. If no suitable intersection can be found whatsoever, the AHN3 raster-based interpolation is used instead. At NWB centreline end vertices (where no intersection exists, i.e. dead ends), the previous vertexâ€™s elevation is simply repeated. It is worth mentioning that the RHDHV implementation deals with all non-standard input data sets (i.e. small-scale engineering models, road management datasets, etc.) by first converting them to identical rasters with the same specifications as AHN3 DTM tiles, and mosaicking them into an output raster based on a priority list, before filling in any remaining gaps.

There are various sources of issues  that I suspect to detect in our scientific analysis of the commercial implementation. For instance, point cloud to raster conversion is, by definition, associated with inherent information loss (less raster cells than pixels), and further reduction in accuracy is introduced by the interpolation mechanism itself. Radial IDW was used to generate AHN3 DTM tiles, which several of the reviewed papers found to be specifically unsuitable for interpolating large-scale areas in which zones of decreased point density (or gaps) exist (both of which characterise ground-filtered AHN data). In addition, the procedure performs another layer of interpolation to infill gaps, which may further affect accuracy negatively. It is also worth mentioning that RHDHV uses bilinear interpolation inside the raster to produce NWB elevations, which is suggested by e.g. Shi et al. 2005, to be less accurate than other common methods such as bicubic. In terms of their strong prioritising of DTB for R-roads, I should remark that DTB is also a secondary source of information (it is based on procedurally combining various types of sensing into vector features), and in contrast with AHN3, neither its overall nor its local accuracy are reported in its documentation or known from elsewhere. While it no doubt contains valuable information that may benefit the procedure, relying on it as the sole source of information may not be an approach that can guarantee the levels of accuracy needed for SWUNG2 compliance.

My approach is the result of a combined understanding of relevant concepts in related work, my own knowledge and experience relating to geomatics concepts and methods, as well as inspiration from the commercial implementation of RHDHV. The proposed workflow was built with the research questions in mind. The below summary is only a top-level description, as I expect the detailed specifications to change.